{% extends 'base_dashboard.html' %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'help/css/help_dashboard.css' %}?v=2.0" type="text/css" />
{% endblock extra_css %}

{% block content %}
  <div class="container mt-4">
    <div class="row">
      <div class="col-12">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a href="{% url 'workman:dashboard' %}">Dashboard</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">Help</li>
          </ol>
        </nav>
      </div>
    </div>

    <div class="help-hero">
      <h1><i class="fas fa-tools"></i> Service Provider Help Guide</h1>
      <p class="lead mb-0">
        Welcome to your complete workflow guide for managing tasks on Yellowkey.
      </p>
    </div>

    <div class="info-box">
      <h5><i class="fas fa-info-circle"></i> Quick Overview</h5>
      <p class="mb-0">
        As a Service Provider, you can view assigned tasks, accept or reject them, perform work, and update task status until completion.
      </p>
    </div>

    <div class="workflow-card">
      <div class="workflow-header">
        <i class="fas fa-project-diagram"></i>
        <span>Service Provider Workflow</span>
      </div>
      <div class="workflow-body">
        <div class="step-item">
          <span class="step-number">1</span>
          <div class="step-content">
            <div class="step-title">View Assigned Tasks</div>
            <div class="step-description">
              Check your dashboard for new maintenance requests and service tasks assigned to you by property owners or agents.
            </div>
          </div>
        </div>
        <div class="step-item">
          <span class="step-number">2</span>
          <div class="step-content">
            <div class="step-title">Accept/Reject Task</div>
            <div class="step-description">
              Review the task details, location, and requirements. Accept the task if you can complete it, or reject if unavailable.
            </div>
          </div>
        </div>
        <div class="step-item">
          <span class="step-number">3</span>
          <div class="step-content">
            <div class="step-title">Perform Task</div>
            <div class="step-description">
              Complete the maintenance or service work according to the specifications provided by the client.
            </div>
          </div>
        </div>
        <div class="step-item">
          <span class="step-number">4</span>
          <div class="step-content">
            <div class="step-title">Update Task Status</div>
            <div class="step-description">
              Keep clients informed by updating the task status. Add notes or photos if needed to document progress.
            </div>
          </div>
        </div>
        <div class="step-item">
          <span class="step-number">5</span>
          <div class="step-content">
            <div class="step-title">Mark Task as Complete</div>
            <div class="step-description">
              Once the work is finished, mark the task as complete. The client will be notified and can provide feedback.
            </div>
          </div>
        </div>
      </div>
    </div>

    <h2 class="section-title">
      <i class="fas fa-book"></i> Detailed Instructions
    </h2>

    <div class="feature-card">
      <div class="accordion" id="helpAccordion">
        <!-- Step 1 -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseOne"
                    aria-expanded="true"
                    aria-controls="collapseOne">Step 1: View Assigned Tasks</button>
          </h2>
          <div id="collapseOne"
               class="accordion-collapse collapse show"
               aria-labelledby="headingOne"
               data-bs-parent="#helpAccordion">
            <div class="accordion-body">
              <ul>
                <li>Log in to your dashboard</li>
                <li>Navigate to "My Tasks" or "Assigned Tasks" section</li>
                <li>View all pending, in-progress, and completed tasks</li>
                <li>Click on any task to view full details</li>
              </ul>
            </div>
          </div>
        </div>
        <!-- Step 2 -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingTwo">
            <button class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseTwo"
                    aria-expanded="false"
                    aria-controls="collapseTwo">Step 2: Accept/Reject Task</button>
          </h2>
          <div id="collapseTwo"
               class="accordion-collapse collapse"
               aria-labelledby="headingTwo"
               data-bs-parent="#helpAccordion">
            <div class="accordion-body">
              <ul>
                <li>Review task description, location, and timeline</li>
                <li>Check if you have the required skills and availability</li>
                <li>Click "Accept" to take on the task</li>
                <li>Click "Reject" if you cannot complete the.
                Provide a reason if required.</li>
                <li>Accepted tasks will move to your "Active Tasks" list</li>
              </ul>
            </div>
          </div>
        </div>
        <!-- Step 3 -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingThree">
            <button class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseThree"
                    aria-expanded="false"
                    aria-controls="collapseThree">Step 3: Perform Task</button>
          </h2>
          <div id="collapseThree"
               class="accordion-collapse collapse"
               aria-labelledby="headingThree"
               data-bs-parent="#helpAccordion">
            <div class="accordion-body">
              <ul>
                <li>Contact the client if you need additional information</li>
                <li>Schedule a visit if required</li>
                <li>Complete the work according to specifications</li>
                <li>Maintain professional standards</li>
                <li>Take photos before and after if applicable</li>
              </ul>
            </div>
          </div>
        </div>
        <!-- Step 4 -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingFour">
            <button class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseFour"
                    aria-expanded="false"
                    aria-controls="collapseFour">Step 4: Update Task Status</button>
          </h2>
          <div id="collapseFour"
               class="accordion-collapse collapse"
               aria-labelledby="headingFour"
               data-bs-parent="#helpAccordion">
            <div class="accordion-body">
              <ul>
                <li>Update task status regularly (In Progress, On Hold, etc.)</li>
                <li>Add notes to document your progress</li>
                <li>Upload photos if relevant</li>
                <li>Communicate any delays or issues immediately</li>
                <li>Keep the client informed of your progress</li>
              </ul>
            </div>
          </div>
        </div>
        <!-- Step 5 -->
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingFive">
            <button class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseFive"
                    aria-expanded="false"
                    aria-controls="collapseFive">Step 5: Mark Task as Complete</button>
          </h2>
          <div id="collapseFive"
               class="accordion-collapse collapse"
               aria-labelledby="headingFive"
               data-bs-parent="#helpAccordion">
            <div class="accordion-body">
              <ul>
                <li>Ensure all work is finished to satisfaction</li>
                <li>Upload final photos or documentation</li>
                <li>Add completion notes</li>
                <li>Click "Mark as Complete"</li>
                <li>Client will be notified and may provide feedback</li>
                <li>Task will move to "Completed Tasks" list</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <h2 class="section-title">
      <i class="fas fa-lightbulb"></i> Tips & Best Practices
    </h2>

    <div class="feature-card">
      <div class="feature-card-body">
        <ul class="feature-list">
          <li>
            <strong>Respond Quickly:</strong> Accept or reject tasks within 24 hours to maintain good ratings.
          </li>
          <li>
            <strong>Communicate:</strong> Keep clients updated throughout the process.
          </li>
          <li>
            <strong>Be Professional:</strong> Arrive on time and maintain professional conduct.
          </li>
          <li>
            <strong>Document Work:</strong> Take photos before and after to protect yourself and inform clients.
          </li>
          <li>
            <strong>Quality Service:</strong> Deliver high-quality work to receive positive reviews and more assignments.
          </li>
          <li>
            <strong>Update Profile:</strong> Keep your skills and availability up to date.
          </li>
        </ul>
      </div>
    </div>

    <div class="contact-box">
      <h4><i class="fas fa-question-circle"></i> Need More Help?</h4>
      <p>If you have questions or need assistance, please contact us:</p>
      <ul class="mb-0">
        <li>
          Email: <a href="mailto:admin@yellowkey.qa">support@yellowkey.qa</a>
        </li>
        <li>
          Phone: <a href="tel:+97477123456">+974 3343 0001</a>
        </li>
        <li>WhatsApp: Join our Service Provider support group from your dashboard</li>
      </ul>
    </div>

    <div class="text-center mt-4 mb-5">
      <a href="{% url 'workman:dashboard' %}" class="btn btn-help-primary">
        <i class="fas fa-arrow-left"></i> Back to Dashboard
      </a>
    </div>
  </div>
{% endblock %}