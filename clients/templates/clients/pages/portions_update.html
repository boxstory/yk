<!-- Portions Update Form -->
<div class="modern-form-card">
    <div class="form-section">
        <h3 class="section-title">Unit Information</h3>

        <form method="post" enctype="multipart/form-data" class="modern-form">
            {% csrf_token %}

            <!-- Error Messages -->
            {% if form.non_field_errors %}
                <div class="alert alert-danger mb-3">
                    {% for error in form.non_field_errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}

            <!-- Property Data (Hidden) -->
            {% with field=form.property_data %}
                {{ field }}
            {% endwith %}

            <div class="form-row">
                <!-- Unit Number Field -->
                {% with field=form.unit_no %}
                <div class="form-group modern-field">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    <div class="input-wrapper">
                        <i class="bi bi-hash"></i>
                        <input type="text" id="{{ field.id_for_label }}" name="{{ field.name }}" class="modern-input" placeholder="Unit number" value="{{ field.value|default:'' }}">
                    </div>
                    {% if field.errors %}<span class="error-text">{{ field.errors.0 }}</span>{% endif %}
                </div>
                {% endwith %}

                <!-- Floor Number Field -->
                {% with field=form.floor_no %}
                <div class="form-group modern-field">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    <div class="input-wrapper">
                        <i class="bi bi-building"></i>
                        <input type="number" id="{{ field.id_for_label }}" name="{{ field.name }}" class="modern-input" placeholder="Floor number" value="{{ field.value|default:'' }}">
                    </div>
                    {% if field.errors %}<span class="error-text">{{ field.errors.0 }}</span>{% endif %}
                </div>
                {% endwith %}
            </div>

            <div class="form-row">
                <!-- Portion Type Field -->
                {% with field=form.portion_type %}
                <div class="form-group modern-field">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    <div class="select-wrapper">
                        <select id="{{ field.id_for_label }}" name="{{ field.name }}" class="modern-select">
                            <option value="">Select portion type</option>
                            {% for value, label in field.field.choices %}
                                {% if value %}
                                    <option value="{{ value }}" {% if field.value == value %}selected{% endif %}>{{ label }}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                        <i class="bi bi-chevron-down"></i>
                    </div>
                    {% if field.errors %}<span class="error-text">{{ field.errors.0 }}</span>{% endif %}
                </div>
                {% endwith %}

                <!-- Furnished Type Field -->
                {% with field=form.furnished_type %}
                <div class="form-group modern-field">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    <div class="select-wrapper">
                        <select id="{{ field.id_for_label }}" name="{{ field.name }}" class="modern-select">
                            <option value="">Select furnished type</option>
                            {% for value, label in field.field.choices %}
                                {% if value %}
                                    <option value="{{ value }}" {% if field.value == value %}selected{% endif %}>{{ label }}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                        <i class="bi bi-chevron-down"></i>
                    </div>
                    {% if field.errors %}<span class="error-text">{{ field.errors.0 }}</span>{% endif %}
                </div>
                {% endwith %}
            </div>

            <div class="form-row single">
                <!-- Furnished Extra Info Field -->
                {% with field=form.furnished_extra_info %}
                <div class="form-group modern-field">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    <div class="input-wrapper">
                        <i class="bi bi-pencil-square"></i>
                        <input type="text" id="{{ field.id_for_label }}" name="{{ field.name }}" class="modern-input" placeholder="Furnished extra info" value="{{ field.value|default:'' }}">
                    </div>
                    {% if field.errors %}<span class="error-text">{{ field.errors.0 }}</span>{% endif %}
                </div>
                {% endwith %}
            </div>

            <div class="form-row single">
                <!-- Description Field -->
                {% with field=form.description %}
                <div class="form-group modern-field">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    <div class="textarea-wrapper">
                        <i class="bi bi-file-text"></i>
                        <textarea id="{{ field.id_for_label }}" name="{{ field.name }}" class="modern-textarea" placeholder="Portion description" rows="4">{{ field.value|default:'' }}</textarea>
                    </div>
                    {% if field.errors %}<span class="error-text">{{ field.errors.0 }}</span>{% endif %}
                </div>
                {% endwith %}
            </div>

            <div class="form-row">
                <!-- Price Field -->
                {% with field=form.price %}
                <div class="form-group modern-field">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    <div class="input-wrapper">
                        <i class="bi bi-currency-dollar"></i>
                        <input type="number" id="{{ field.id_for_label }}" name="{{ field.name }}" class="modern-input" placeholder="Price" value="{{ field.value|default:'' }}">
                    </div>
                    {% if field.errors %}<span class="error-text">{{ field.errors.0 }}</span>{% endif %}
                </div>
                {% endwith %}

                <!-- Bedrooms Field -->
                {% with field=form.bedrooms %}
                <div class="form-group modern-field">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    <div class="input-wrapper">
                        <i class="bi bi-door-closed"></i>
                        <input type="number" id="{{ field.id_for_label }}" name="{{ field.name }}" class="modern-input" placeholder="Number of bedrooms" value="{{ field.value|default:'' }}">
                    </div>
                    {% if field.errors %}<span class="error-text">{{ field.errors.0 }}</span>{% endif %}
                </div>
                {% endwith %}
            </div>

            <div class="form-row">
                <!-- Bathrooms Field -->
                {% with field=form.bathrooms %}
                <div class="form-group modern-field">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    <div class="input-wrapper">
                        <i class="bi bi-water"></i>
                        <input type="number" id="{{ field.id_for_label }}" name="{{ field.name }}" class="modern-input" placeholder="Number of bathrooms" value="{{ field.value|default:'' }}">
                    </div>
                    {% if field.errors %}<span class="error-text">{{ field.errors.0 }}</span>{% endif %}
                </div>
                {% endwith %}

                <!-- SQFT Field -->
                {% with field=form.sqft %}
                <div class="form-group modern-field">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    <div class="input-wrapper">
                        <i class="bi bi-rulers"></i>
                        <input type="number" id="{{ field.id_for_label }}" name="{{ field.name }}" class="modern-input" placeholder="Square feet" value="{{ field.value|default:'' }}">
                    </div>
                    {% if field.errors %}<span class="error-text">{{ field.errors.0 }}</span>{% endif %}
                </div>
                {% endwith %}
            </div>

            <div class="form-row">
                <!-- Photo Main Field -->
                {% with field=form.photo_main %}
                <div class="form-group modern-field">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    <div class="input-wrapper">
                        <i class="bi bi-image"></i>
                        <input type="file" id="{{ field.id_for_label }}" name="{{ field.name }}" class="modern-input" accept="image/*">
                    </div>
                    {% if field.errors %}<span class="error-text">{{ field.errors.0 }}</span>{% endif %}
                </div>
                {% endwith %}

                <!-- Photo 1 Field -->
                {% with field=form.photo_1 %}
                <div class="form-group modern-field">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    <div class="input-wrapper">
                        <i class="bi bi-image"></i>
                        <input type="file" id="{{ field.id_for_label }}" name="{{ field.name }}" class="modern-input" accept="image/*">
                    </div>
                    {% if field.errors %}<span class="error-text">{{ field.errors.0 }}</span>{% endif %}
                </div>
                {% endwith %}
            </div>

            <div class="form-row">
                <!-- Photo 2 Field -->
                {% with field=form.photo_2 %}
                <div class="form-group modern-field">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    <div class="input-wrapper">
                        <i class="bi bi-image"></i>
                        <input type="file" id="{{ field.id_for_label }}" name="{{ field.name }}" class="modern-input" accept="image/*">
                    </div>
                    {% if field.errors %}<span class="error-text">{{ field.errors.0 }}</span>{% endif %}
                </div>
                {% endwith %}

                <!-- Photo 3 Field -->
                {% with field=form.photo_3 %}
                <div class="form-group modern-field">
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                    <div class="input-wrapper">
                        <i class="bi bi-image"></i>
                        <input type="file" id="{{ field.id_for_label }}" name="{{ field.name }}" class="modern-input" accept="image/*">
                    </div>
                    {% if field.errors %}<span class="error-text">{{ field.errors.0 }}</span>{% endif %}
                </div>
                {% endwith %}
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary btn-lg mt-4 w-100">
                <i class="bi bi-check-circle me-2"></i>Update Portion
            </button>
        </form>
    </div>
</div>
